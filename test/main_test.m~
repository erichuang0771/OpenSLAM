run('../library/vlfeat/vlfeat-0.9.20/toolbox/vl_setup.m')
addpath ../source/;
ims = loadImages('../data/template/');
paras = dlmread('../data/template/templeR_par.txt',' ',0,1);
width = size(ims{1},2);
height = size(ims{1},1);

[ P1,P2 ] = detectSIFT( ims );
[ F, P1_inlier, P2_inlier ] = ransacF( P1(:,1:2), P2(:,1:2), max(width,height));
K1 = reshape(paras(1,9),3,3)';
K2 = reshape(paras(1,1))

match_plot(ims{1},ims{2},P1_inlier(:,1:2),P2_inlier(:,1:2));

%% Next step
%find intrinsic and extrinsic matirx from F
% trangulation with color
%%%how to do bundle adjustment?
% save point cloud as ply by calling save_ply function
% imgname.png k11 k12 k13 
%              k21 k22 k23 
%              k31 k32 k33
%              
%              r11 r12 r13 
%              r21 r22 r23 
%              r31 r32 r33 
%              
%              t1 t2 t3"
